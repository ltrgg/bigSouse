{"remainingRequest":"D:\\练习\\大文件上传\\大文件上传和断点续传\\客户端\\node_modules\\babel-loader\\lib\\index.js!D:\\练习\\大文件上传\\大文件上传和断点续传\\客户端\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\练习\\大文件上传\\大文件上传和断点续传\\客户端\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\练习\\大文件上传\\大文件上传和断点续传\\客户端\\src\\App3.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\练习\\大文件上传\\大文件上传和断点续传\\客户端\\src\\App3.vue","mtime":1595773953000},{"path":"D:\\练习\\大文件上传\\大文件上传和断点续传\\客户端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1665563423068},{"path":"D:\\练习\\大文件上传\\大文件上传和断点续传\\客户端\\node_modules\\babel-loader\\lib\\index.js","mtime":1665563427105},{"path":"D:\\练习\\大文件上传\\大文件上传和断点续传\\客户端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1665563423068},{"path":"D:\\练习\\大文件上传\\大文件上传和断点续传\\客户端\\node_modules\\vue-loader\\lib\\index.js","mtime":1665563427303}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJEOi9cdTdFQzNcdTRFNjAvXHU1OTI3XHU2NTg3XHU0RUY2XHU0RTBBXHU0RjIwL1x1NTkyN1x1NjU4N1x1NEVGNlx1NEUwQVx1NEYyMFx1NTQ4Q1x1NjVBRFx1NzBCOVx1N0VFRFx1NEYyMC9cdTVCQTJcdTYyMzdcdTdBRUYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBmaWxlUGFyc2UgfSBmcm9tICIuL2Fzc2V0cy91dGlscyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBTcGFya01ENSBmcm9tICJzcGFyay1tZDUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFwcCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRvdGFsOiAwLAogICAgICB2aWRlbzogbnVsbCwKICAgICAgYnRuOiBmYWxzZQogICAgfTsKICB9LAogIGZpbHRlcnM6IHsKICAgIGJ0blRleHQ6IGZ1bmN0aW9uIGJ0blRleHQoYnRuKSB7CiAgICAgIHJldHVybiBidG4gPyAi57un57utIiA6ICLmmoLlgZwiOwogICAgfSwKICAgIHRvdGFsVGV4dDogZnVuY3Rpb24gdG90YWxUZXh0KHRvdGFsKSB7CiAgICAgIHJldHVybiB0b3RhbCA+IDEwMCA/IDEwMCA6IHRvdGFsOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgY2hhbmdlRmlsZTogZnVuY3Rpb24gY2hhbmdlRmlsZShmaWxlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBidWZmZXIsIHNwYXJrLCBoYXNoLCBzdWZmaXgsIHBhcnRMaXN0LCBwYXJ0c2l6ZSwgY3VyLCBpLCBpdGVtOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmIChmaWxlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgZmlsZSA9IGZpbGUucmF3OyAvLyDop6PmnpDkuLpCVUZGRVLmlbDmja4KICAgICAgICAgICAgICAgIC8vIOaIkeS7rOS8muaKiuaWh+S7tuWIh+eJh+WkhOeQhu+8muaKiuS4gOS4quaWh+S7tuWIhuWJsuaIkOS4uuWlveWHoOS4qumDqOWIhu+8iOWbuuWumuaVsOmHjy/lm7rlrprlpKflsI/vvIkKICAgICAgICAgICAgICAgIC8vIOavj+S4gOS4quWIh+eJh+acieiHquW3seeahOmDqOWIhuaVsOaNruWSjOiHquW3seeahOWQjeWtlwogICAgICAgICAgICAgICAgLy8gSEFTSF8xLm1wNAogICAgICAgICAgICAgICAgLy8gSEFTSF8yLm1wNAogICAgICAgICAgICAgICAgLy8gLi4uCgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gZmlsZVBhcnNlKGZpbGUsICJidWZmZXIiKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgYnVmZmVyID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHNwYXJrID0gbmV3IFNwYXJrTUQ1LkFycmF5QnVmZmVyKCk7CiAgICAgICAgICAgICAgICBzcGFyay5hcHBlbmQoYnVmZmVyKTsKICAgICAgICAgICAgICAgIGhhc2ggPSBzcGFyay5lbmQoKTsKICAgICAgICAgICAgICAgIHN1ZmZpeCA9IC9cLihbMC05YS16QS1aXSspJC9pLmV4ZWMoZmlsZS5uYW1lKVsxXTsgLy8g5Yib5bu6MTAw5Liq5YiH54mHCgogICAgICAgICAgICAgICAgcGFydExpc3QgPSBbXSwgcGFydHNpemUgPSBmaWxlLnNpemUgLyAxMDAsIGN1ciA9IDA7CgogICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IDEwMDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgIGl0ZW0gPSB7CiAgICAgICAgICAgICAgICAgICAgY2h1bms6IGZpbGUuc2xpY2UoY3VyLCBjdXIgKyBwYXJ0c2l6ZSksCiAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6ICIiLmNvbmNhdChoYXNoLCAiXyIpLmNvbmNhdChpLCAiLiIpLmNvbmNhdChzdWZmaXgpCiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIGN1ciArPSBwYXJ0c2l6ZTsKICAgICAgICAgICAgICAgICAgcGFydExpc3QucHVzaChpdGVtKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpcy5wYXJ0TGlzdCA9IHBhcnRMaXN0OwogICAgICAgICAgICAgICAgX3RoaXMuaGFzaCA9IGhhc2g7CgogICAgICAgICAgICAgICAgX3RoaXMuc2VuZFJlcXVlc3QoKTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzZW5kUmVxdWVzdDogZnVuY3Rpb24gc2VuZFJlcXVlc3QoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgdmFyIHJlcXVlc3RMaXN0LCBpLCBjb21wbGV0ZSwgc2VuZDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgLy8g5qC55o2uMTAw5Liq5YiH54mH5Yib6YCgMTAw5Liq6K+35rGC77yI6ZuG5ZCI77yJCiAgICAgICAgICAgICAgICByZXF1ZXN0TGlzdCA9IFtdOwoKICAgICAgICAgICAgICAgIF90aGlzMi5wYXJ0TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgICAgICAgICAgICAvLyDmr4/kuIDkuKrlh73mlbDpg73mmK/lj5HpgIHkuIDkuKrliIfniYfnmoTor7fmsYIKICAgICAgICAgICAgICAgICAgdmFyIGZuID0gZnVuY3Rpb24gZm4oKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJjaHVuayIsIGl0ZW0uY2h1bmspOwogICAgICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgiZmlsZW5hbWUiLCBpdGVtLmZpbGVuYW1lKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgiL3NpbmdsZTMiLCBmb3JtRGF0YSwgewogICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgICAiQ29udGVudC1UeXBlIjogIm11bHRpcGFydC9mb3JtLWRhdGEiCiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuZGF0YTsKCiAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmNvZGUgPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIudG90YWwgKz0gMTsgLy8g5Lyg5a6M55qE5YiH54mH5oiR5Lus5oqK5a6D56e76Zmk5o6JCgogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIucGFydExpc3Quc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgIHJlcXVlc3RMaXN0LnB1c2goZm4pOwogICAgICAgICAgICAgICAgfSk7IC8vIOS8oOmAku+8muW5tuihjChhamF4LmFib3J0KCkpL+S4suihjCjln7rkuo7moIflv5fmjqfliLbkuI3lj5HpgIEpCgoKICAgICAgICAgICAgICAgIGkgPSAwOwoKICAgICAgICAgICAgICAgIGNvbXBsZXRlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQ7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5nZXQoIi9tZXJnZSIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaDogX3RoaXMyLmhhc2gKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmRhdGE7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jb2RlID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLnZpZGVvID0gcmVzdWx0LnBhdGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBjb21wbGV0ZSgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSgpOwoKICAgICAgICAgICAgICAgIHNlbmQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzMi5hYm9ydCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoaSA+PSByZXF1ZXN0TGlzdC5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g6YO95Lyg5a6M5LqGCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdExpc3RbaV0oKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSsrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gc2VuZCgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0oKTsKCiAgICAgICAgICAgICAgICBzZW5kKCk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGhhbmRsZUJ0bjogZnVuY3Rpb24gaGFuZGxlQnRuKCkgewogICAgICBpZiAodGhpcy5idG4pIHsKICAgICAgICAvL+aWreeCuee7reS8oAogICAgICAgIHRoaXMuYWJvcnQgPSBmYWxzZTsKICAgICAgICB0aGlzLmJ0biA9IGZhbHNlOwogICAgICAgIHRoaXMuc2VuZFJlcXVlc3QoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy/mmoLlgZzkuIrkvKAKCgogICAgICB0aGlzLmJ0biA9IHRydWU7CiAgICAgIHRoaXMuYWJvcnQgPSB0cnVlOwogICAgfQogIH0KfTs="},{"version":3,"sources":["App3.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"app\">\n    <el-upload drag action :auto-upload=\"false\" :show-file-list=\"false\" :on-change=\"changeFile\">\n      <i class=\"el-icon-upload\"></i>\n      <div class=\"el-upload__text\">\n        将文件拖到此处，或\n        <em>点击上传</em>\n      </div>\n    </el-upload>\n\n    <!-- PROGRESS -->\n    <div class=\"progress\">\n      <span>上传进度：{{total|totalText}}%</span>\n      <el-link type=\"primary\" v-if=\"total>0 && total<100\" @click=\"handleBtn\">{{btn|btnText}}</el-link>\n    </div>\n\n    <!-- VIDEO -->\n    <div class=\"uploadImg\" v-if=\"video\">\n      <video :src=\"video\" controls />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { fileParse } from \"./assets/utils\";\nimport axios from \"axios\";\nimport SparkMD5 from \"spark-md5\";\n\nexport default {\n  name: \"App\",\n  data() {\n    return {\n      total: 0,\n      video: null,\n      btn: false,\n    };\n  },\n  filters: {\n    btnText(btn) {\n      return btn ? \"继续\" : \"暂停\";\n    },\n    totalText(total) {\n      return total > 100 ? 100 : total;\n    },\n  },\n  methods: {\n    async changeFile(file) {\n      if (!file) return;\n      file = file.raw;\n\n      // 解析为BUFFER数据\n      // 我们会把文件切片处理：把一个文件分割成为好几个部分（固定数量/固定大小）\n      // 每一个切片有自己的部分数据和自己的名字\n      // HASH_1.mp4\n      // HASH_2.mp4\n      // ...\n      let buffer = await fileParse(file, \"buffer\"),\n        spark = new SparkMD5.ArrayBuffer(),\n        hash,\n        suffix;\n      spark.append(buffer);\n      hash = spark.end();\n      suffix = /\\.([0-9a-zA-Z]+)$/i.exec(file.name)[1];\n\n      // 创建100个切片\n      let partList = [],\n        partsize = file.size / 100,\n        cur = 0;\n      for (let i = 0; i < 100; i++) {\n        let item = {\n          chunk: file.slice(cur, cur + partsize),\n          filename: `${hash}_${i}.${suffix}`,\n        };\n        cur += partsize;\n        partList.push(item);\n      }\n\n      this.partList = partList;\n      this.hash = hash;\n      this.sendRequest();\n    },\n    async sendRequest() {\n      // 根据100个切片创造100个请求（集合）\n      let requestList = [];\n      this.partList.forEach((item, index) => {\n        // 每一个函数都是发送一个切片的请求\n        let fn = () => {\n          let formData = new FormData();\n          formData.append(\"chunk\", item.chunk);\n          formData.append(\"filename\", item.filename);\n          return axios\n            .post(\"/single3\", formData, {\n              headers: { \"Content-Type\": \"multipart/form-data\" },\n            })\n            .then((result) => {\n              result = result.data;\n              if (result.code == 0) {\n                this.total += 1;\n                // 传完的切片我们把它移除掉\n                this.partList.splice(index, 1);\n              }\n            });\n        };\n        requestList.push(fn);\n      });\n\n      // 传递：并行(ajax.abort())/串行(基于标志控制不发送)\n      let i = 0;\n      let complete = async () => {\n        let result = await axios.get(\"/merge\", {\n          params: {\n            hash: this.hash,\n          },\n        });\n        result = result.data;\n        if (result.code == 0) {\n          this.video = result.path;\n        }\n      };\n      let send = async () => {\n        // 已经中断则不再上传\n        if (this.abort) return;\n        if (i >= requestList.length) {\n          // 都传完了\n          complete();\n          return;\n        }\n        await requestList[i]();\n        i++;\n        send();\n      };\n      send();\n    },\n    handleBtn() {\n      if (this.btn) {\n        //断点续传\n        this.abort = false;\n        this.btn = false;\n        this.sendRequest();\n        return;\n      }\n      //暂停上传\n      this.btn = true;\n      this.abort = true;\n    },\n  },\n};\n</script>"],"sourceRoot":"src"}]}